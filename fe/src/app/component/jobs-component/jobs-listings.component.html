<div class="jobs-listings-component">
    <mat-accordion>
        <mat-expansion-panel *ngFor="let job of jobs; let i = index;"
                             (clonsed)="onExpansionPanelClosed(job)"
                             (opened)="onExpansionPanelOpened(job)">
            <mat-expansion-panel-header [attr.test-job-header-index]="i">
                <mat-panel-title [attr.test-job-title-index]="i">{{job.name}} (#{{job.id}})</mat-panel-title>
                <mat-panel-description>
                    <div>
                       <div>Status: {{job.status}}</div>
                       <div>Progress: {{job.progress}}</div>
                       <div>Creation Date: {{job.creationDate | date:'medium'}}</div>
                       <div>Last Update: {{job.lastUpdate | date:'medium'}}</div>
                    </div>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <app-job-details [job]="job"
                             [fetchFn]="fetchFn"
                             [fetch]="fetch(job)">
            </app-job-details>
        </mat-expansion-panel>
    </mat-accordion>
</div>
